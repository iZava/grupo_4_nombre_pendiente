<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head', {webtitle: "Registrarse"}) %>
<body>
  <%- include('../partials/header') %>
    <main>
        <div class="register">
            <div class="container-login-register">
                <div class="tab-login">
                    <a href="/users/login"><button type="button">Iniciar sesión</button></a>
                </div>
                <div class="tab-register">
                    <a href="/users/register"><button type="button">Registro</button></a>
                </div>
            </div>
            <div class="card-register">
                <section>
                    
                    <div class="logo-login">
                        <i class="fa-solid fa-user"></i>
                    </div>
                    
                    <div class="log-text">
                        <p>EDICIÓN DE USUARIO</p>
                        </div>
                        
                    <% if (users) { %>
                    <form action="/users/editUser/<%= users.id %>?_method=PUT" method="POST" class="form-register" enctype="multipart/form-data"> 

                        <div class="register-log-name">
                            <i class="fa-solid fa-pencil"></i>
                            <input type="text" name="firstName" id="firstName" placeholder="Nombre" value="<%=users.firstName %>" > 
                        </div> 
                        <% if (locals.errors && errors.firstName) { %>
                            <div class="text-danger">
                                <%= errors.firstName.msg %>
                            </div>
                            <% } %>

                        <div class="register-log-name">
                            <i class="fa-solid fa-pencil"></i>
                            <input type="text" name="lastName" id="lastName" placeholder="Apellido" value="<%=users.lastName %>" > 
                        </div> 
                        <% if (locals.errors && errors.lastName
                        ) { %>
                            <div class="text-danger">
                                <%= errors.lastName.msg %>
                            </div>
                            <% } %>

                        <div class="register-log-user">
                            <i class="fa-solid fa-user"></i>
                            <input type="text" name="logUser" id="logUser" placeholder="Nombre de usuario" value="<%=users.logUser %>" > 
                        </div> 
                        <% if (locals.errors && errors.logUser) { %>
                            <div class="text-danger">
                                <%= errors.logUser.msg %>
                            </div>
                            <% } %>
                        

                        <div class="register-log-email">
                            <i class="fa-solid fa-envelope"></i>
                            <input type="text" name="email" id="email" placeholder="Correo Electrónico" value="<%=users.email %>" > 
                        </div> 
                        <% if (locals.errors && errors.email) { %>
                            <div class="text-danger">
                                <%= errors.email.msg %>
                            </div>
                            <% } %>

                        <div class="register-log-password">
                            <i class="fa-solid fa-key"></i>
                            <input type="password" name="password" id="password" placeholder="Contraseña">
                        </div>
                        <% if (locals.errors && errors.password) { %>
                            <div class="text-danger">
                                <%= errors.password.msg %>
                            </div>
                            <% } %>

                        <div class="register-log-password">
                            <i class="fa-solid fa-key"></i>
                            <input type="password" name="repeat_password" id="repeat_password"
                            placeholder="Repita la Contraseña">
                        </div>
                        <% if (locals.errors && errors.repeat_password) { %>
                            <div class="text-danger">
                                <%= errors.repeat_password.msg %>
                            </div>
                            <% } %>

                        <div class="register-log-password">
                            <i class="fa-solid fa-key"></i>
                            <select name="category_id" id="category_id" class="form-input">
                                <option value="" selected>- Select Category -</option>                                
                                <% allCategory.forEach(category => { %>
                                    <option value="<%= category.id %>"<% if (users.category_id == category.id) { %><%= 'selected' %><% }; %>><%= category.name_category %></option>
                                <% }); %>
                            </select>
                        </div>

                        <% if (locals.errors && errors.category_id) { %>
                            <div class="text-danger">
                                <%= errors.category_id.msg %>
                            </div>
                            <% } %>


                        <div class="register-log-image">
                            <label for="userImage" class="form-label"></label>
                            <input type="file" name="image" id="image" class="form-input"> 
                        </div>
                        <% if (locals.errors && errors.image) { %>
                            <div class="text-danger">
                                <%= errors.image.msg %>
                            </div>
                            <% } %>
                            <div class="register-button">
                                <button type="submit">Guardar</button>
                            </div>
                    </form>
                    <% } %>

                    <div class="Privacy-Policy">
                        <p>Sus datos personales se utilizarán para respaldar su experiencia en este sitio web, para
                            administrar el acceso a su cuenta y para otros fines descritos en nuestra <u>política de
                                privacidad</u></p>
                    </div>

                    <a href="/users/login"><p class="back-login"><u>Volver a inicio de sesión</u></p></a> 

                </section>
            </div>
        </div>
    </main>
    <div id="modal-menu" class="modal">
        <a class="close" href="#">X</a>
        <li><a href="/">Inicio</a></li>
        <li><a href="/tshirts">Tienda</a></li>
        <li><a class="red" href="/users/login">Iniciar sesión</a></li>
        <li><a href="/users/register">Registrate</a></li>
        <a class="cart" href="/products/cart"><i class="fas fa-solid fa-cart-shopping"></i></a>
    </div>
    <%- include('../partials/footer') %>
</body>
 
</html>